<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Phaser Pong</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">
    var config = {
        type: Phaser.AUTO,
        width: 1920,
        height: 970,
        physics: {
        default: 'arcade',
        arcade: {
            debug: false
          }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };
    var cursors;
    var wasd;
    var game = new Phaser.Game(config);
    function preload ()
    {
      this.load.image('ball', 'assets/whiteball.png');
      this.load.image('paddle', 'assets/vertical_bar.png');
    }

    function create ()
    {
      paddleLeft = this.physics.add.sprite(0, 510, 'paddle').setScale(0.5);
      paddleLeft.setCollideWorldBounds(true);

      paddleRight = this.physics.add.sprite(1920, 510, 'paddle').setScale(0.5);
      paddleRight.setCollideWorldBounds(true);

      ball = this.physics.add.sprite(920, 510, 'ball').setScale(0.10);
      ball.setVelocity(300, 300);
      ball.setBounce(1,1);
      ball.setCollideWorldBounds(true);

      cursors = this.input.keyboard.createCursorKeys();
      wasd = this.input.keyboard.addKeys({'up': Phaser.Input.Keyboard.KeyCodes.W, 'down': Phaser.Input.Keyboard.KeyCodes.S});

      this.physics.add.collider(paddleRight, ball, paddleCollision, null, this);
      this.physics.add.collider(paddleLeft, ball, paddleCollision, null, this);
    }

    function update ()
    {
      if (cursors.up.isDown) {
        paddleRight.setVelocityY(-350);
      } else if (cursors.down.isDown) {
        paddleRight.setVelocityY(350);
      } else {
        paddleRight.setVelocity(0);
      }
      if (wasd.up.isDown){
        paddleLeft.setVelocityY(-350);
      } else if (wasd.down.isDown) {
        paddleLeft.setVelocityY(350);
      } else {
        paddleLeft.setVelocity(0);
      }
    }

    var ballVelocityY = 300;
    var ballVelocityX = 300;

    function paddleCollision (){
      if (Math.sign(ballVelocityY) === 1 && Math.sign(ballVelocityX) === 1){
        ballVelocityX *= -1;
      } else if (Math.sign(ballVelocityY) === -1 && Math.sign(ballVelocityX) === 1){
        ballVelocityX *= -1;
      } else if (Math.sign(ballVelocityY) === 1 && Math.sign(ballVelocityX) === -1){
        ballVelocityY *= -1;
      } else {
        ballVelocityY *= -1;
      }
      ball.setVelocity(ballVelocityY, ballVelocityX);
      ball.ArcadeBodyCollision.right;

    }
</script>

</body>
</html>
